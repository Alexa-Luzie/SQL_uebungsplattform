<div *ngIf="loading">Lade Aufgaben...</div>
<div *ngIf="error" class="error">{{ error }}</div>

<!-- Zeige "Keine Aufgaben vorhanden" und "Neue Aufgabe" nur bei der Route /tasks -->
<div *ngIf="!loading && tasks.length === 0 && !error && isTasksRoute()">Keine Aufgaben vorhanden.</div>
<button *ngIf="isLehrkraft() && isTasksRoute() && tasks.length === 0" (click)="showForm = true">Neue Aufgabe</button>

<ul *ngIf="!loading && tasks.length > 0">
  <li *ngFor="let task of tasks" (click)="selectTask(task)">
    <strong>{{ task.title }}</strong> – {{ task.description }}
    <!-- Bearbeiten/Löschen nur für Lehrkräfte -->
    <button *ngIf="isLehrkraft()" (click)="onEdit(task); $event.stopPropagation()">Bearbeiten</button>
    <button *ngIf="isLehrkraft()" (click)="onDelete(task.id); $event.stopPropagation()">Löschen</button>
  </li>
</ul>

<app-task-form
  *ngIf="showForm"
  [task]="editTask"
  (taskCreated)="onTaskCreated($event)"
  (taskUpdated)="onTaskUpdated($event)"
  (cancel)="onCancel()"
></app-task-form>